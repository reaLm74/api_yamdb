## Сервис YaMDb

Проект YaMDb собирает отзывы пользователей на произведения. 
Произведения делятся на категории: «Книги», «Фильмы», «Музыка». 
Список категорий может быть расширен администратором.

## Технологии

- Django rest_framework
- Django rest_framework_simplejwt
- Django django_filters
- Git

## Как запустить проект:

Клонирование репозитория:
```sh
git clone https://github.com/realm74/api_yamdb
cd api_yamdb
```

Создание и активирование виртуального окружения:

```sh
python -m venv venv
source venv/Scripts/activate
```

Установить зависимости из файла requirements.txt:

```sh
python -m pip install --upgrade pip
pip install -r requirements.txt
```

Выполнить миграции:

```sh
python manage.py migrate
```

Запустить проект:

```sh
python manage.py runserver
```

После запуска сервера можно ознакомиться с документацией к проекту, 
в которой описана основная логика приложения, документация 
доступна по ссылке: /redoc/


## Как загрузить данные в проект:

Запустить файл import.py в консоли, находясь в директории с проектом:

```sh
python import.py
```

Выполнить команду в консоли:

```sh
python manage.py loaddata reviews/fixtures/*.json
```


### Пользовательские роли
 - Анонимный пользователь — может просматривать описания произведений, читать отзывы и комментарии.
 - Аутентифицированный пользователь (user) — может читать всё, как и Аноним, может публиковать отзывы и ставить оценки произведениям (фильмам/книгам/песенкам), может комментировать отзывы; может редактировать и удалять свои отзывы и комментарии, редактировать свои оценки произведений. Эта роль присваивается по умолчанию каждому новому пользователю.
 - Модератор (moderator) — те же права, что и у Аутентифицированного пользователя, плюс право удалять и редактировать любые отзывы и комментарии.
 - Администратор (admin) — полные права на управление всем контентом проекта. Может создавать и удалять произведения, категории и жанры. Может назначать роли пользователям.
 - Суперюзер Django должен всегда обладать правами администратора, пользователя с правами admin. Даже если изменить пользовательскую роль суперюзера — это не лишит его прав администратора. Суперюзер — всегда администратор, но администратор — не обязательно суперюзер.

### Алгоритм регистрации пользователей
 - Пользователь отправляет POST-запрос с параметрами email и username на эндпоинт /api/v1/auth/signup/.
 - Проект YaMDB отправляет письмо с кодом подтверждения (confirmation_code) на указанный адрес email.
 - Пользователь отправляет POST-запрос с параметрами username и confirmation_code на эндпоинт /api/v1/auth/token/, в ответе на запрос ему приходит token (JWT-токен).
 - В результате пользователь получает токен и может работать с API проекта, отправляя этот токен с каждым запросом.
 - После регистрации и получения токена пользователь может отправить PATCH-запрос на эндпоинт /api/v1/users/me/ и заполнить поля в своём профайле (описание полей — в документации по ссылке: /redoc/).
 
### Создание пользователя администратором
 - Пользователя может создать администратор — через админ-зону сайта или через POST-запрос на специальный эндпоинт api/v1/users/ (описание полей запроса для этого случая — в документации). 
 - - В этот момент письмо с кодом подтверждения пользователю отправлять не нужно.
После этого пользователь должен самостоятельно отправить свой email и username на эндпоинт /api/v1/auth/signup/ , в ответ ему должно прийти письмо с кодом подтверждения.
 - Далее пользователь отправляет POST-запрос с параметрами username и confirmation_code на эндпоинт /api/v1/auth/token/, в ответе на запрос ему приходит token (JWT-токен), как и при самостоятельной регистрации.

 ## Ресурсы проекта YaMDb
- auth: аутентификация.
- users: пользователи.
- titles: произведения, к которым пишут отзывы (определённый фильм, книга или песенка).
- categories: категории (типы) произведений («Фильмы», «Книги», «Музыка»).
- genres: жанры произведений. Одно произведение может быть привязано к нескольким жанрам.
- reviews: отзывы на произведения. Отзыв привязан к определённому произведению.
- comments: комментарии к отзывам. Комментарий привязан к определённому отзыву.
## Примеры запросов
### Available urls

<details>
  <summary>Titles</summary><br>

  `/api/v1/titles/`

  **POST**:

  ```sh
  {
    "name": "string",
    "year": 0,
    "description": "string",
    "genre": [
       "string"
    ],
    "category": "string"
  }
  ```
</details>
<details>
  <summary>Genres</summary><br>

  `/api/v1/genres/`

  **POST**:

  ```sh
  {
    "name": "string",
    "slug": "string"
  }
  ```
</details>
<details>
  <summary>Categories</summary><br>

  `/api/v1/categories/`

  **POST**:

  ```sh
  {
    "name": "string",
    "slug": "string"
  }
  ```
</details>
<details>
  <summary>Reviews</summary><br>

  `/api/v1/titles/<title_id>/reviews/`

  **POST**:

  ```sh
  {
    "text": "string",
    "score": 1
  }
  ```
</details>
<details>
  <summary>Comments</summary><br>

  `/api/v1/titles/<title_id>/reviews/<review_id>comments/`

  **POST**:
  
  ```sh
  {
    "text": "string"
  }
  ```

</details>

 ## Авторы
- Александр Ратушнюк
- Евгений Березовский
- Наталья Петелина
